<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>plugin高级 - whitegl0ves</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="whitegl0ves"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="whitegl0ves"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="plugin 开发高级介绍"><meta property="og:type" content="blog"><meta property="og:title" content="plugin高级"><meta property="og:url" content="http://example.com/2023/01/01/webpack/plugin/2.%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6/"><meta property="og:site_name" content="whitegl0ves"><meta property="og:description" content="plugin 开发高级介绍"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1035c8f81506496f90535eb366d762a1~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3416427756ea48048cddcaf9aa7cbcdc~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="article:published_time" content="2022-12-31T20:11:18.000Z"><meta property="article:modified_time" content="2023-08-13T04:15:31.292Z"><meta property="article:author" content="whitegl0ves"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1035c8f81506496f90535eb366d762a1~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2023/01/01/webpack/plugin/2.%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6/"},"headline":"plugin高级","image":[],"datePublished":"2022-12-31T20:11:18.000Z","dateModified":"2023-08-13T04:15:31.292Z","author":{"@type":"Person","name":"whitegl0ves"},"publisher":{"@type":"Organization","name":"whitegl0ves","logo":{"@type":"ImageObject","url":"data:image/jpeg;base64,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"}},"description":"plugin 开发高级介绍"}</script><link rel="canonical" href="http://example.com/2023/01/01/webpack/plugin/2.%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="data:image/jpeg;base64,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" alt="whitegl0ves" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="/"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-31T20:11:18.000Z" title="2023/1/1 04:11:18">2023-01-01</time>发表</span><span class="level-item"><time dateTime="2023-08-13T04:15:31.292Z" title="2023/8/13 12:15:31">2023-08-13</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/webpack/">webpack</a><span> / </span><a class="link-muted" href="/categories/webpack/plugin/">plugin</a></span><span class="level-item">19 分钟读完 (大约2888个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">plugin高级</h1><div class="content"><blockquote>
<p>plugin 开发高级介绍</p>
</blockquote>
<span id="more"></span>

<h2 id="日志处理"><a href="#日志处理" class="headerlink" title="日志处理"></a>日志处理</h2><p>与 Loader 相似，开发插件时也可以复用 Webpack 一系列日志基础设施，包括：</p>
<ul>
<li>通过 <code>compilation.getLogger</code> 获取分级日志管理器；</li>
<li>使用 <code>compilation.errors/wraning</code> 处理异常信息。</li>
</ul>
<blockquote>
<p>使用分级日志基础设施</p>
</blockquote>
<p>开发插件时，也能使用这一接口管理日志输出，只是用法稍有不同，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PLUGIN_NAME</span> = <span class="string">&quot;FooPlugin&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FooPlugin</span> &#123;</span><br><span class="line">  <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123;</span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params">compilation</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 获取日志对象</span></span><br><span class="line">      <span class="keyword">const</span> logger = compilation.<span class="title function_">getLogger</span>(<span class="variable constant_">PLUGIN_NAME</span>);</span><br><span class="line">      <span class="comment">// 调用分级日志接口</span></span><br><span class="line">      logger.<span class="title function_">log</span>(<span class="string">&quot;Logging from FooPlugin&quot;</span>);</span><br><span class="line">      logger.<span class="title function_">error</span>(<span class="string">&quot;Error from FooPlugin&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">FooPlugin</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>提示：此外，还可以通过 <code>compiler.getInfrastructureLogger</code> 获取日志对象。</p>
</blockquote>
<p>上述代码需要调用 <code>compilation.getLogger</code> 获取日志对象 <code>logger</code>，<code>logger</code> 的用法与 Loader 场景相似，同样支持 <code>verbose/log/info/warn/error</code> 五种日志分级，此处不再赘述。</p>
<blockquote>
<p>正确处理异常信息</p>
</blockquote>
<p>在 Webpack 插件中，可以通过如下方式提交错误信息。</p>
<ul>
<li>使用 <code>logger.error/warning</code> 接口，这种方法同样不会中断构建流程，且能够复用 Webpack 的分级日志体系，由最终用户决定是否输出对应等级日志。</li>
<li>借助 <code>compilation.errors/warnings</code> 数组，如：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PLUGIN_NAME</span> = <span class="string">&quot;FooPlugin&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FooPlugin</span> &#123;</span><br><span class="line">  <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123;</span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params">compilation</span>) =&gt;</span> &#123;</span><br><span class="line">      compilation.<span class="property">errors</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Emit Error From FooPlugin&quot;</span>));</span><br><span class="line">      compilation.<span class="property">warnings</span>.<span class="title function_">push</span>(<span class="string">&quot;Emit Warning From FooPlugin&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">FooPlugin</span>;</span><br></pre></td></tr></table></figure>

<p>执行效果：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1035c8f81506496f90535eb366d762a1~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<p>这种方法仅记录异常日志，不影响构建流程，构建正常结束后 Webpack 还会将错误信息汇总到 <a target="_blank" rel="noopener" href="https://webpack.js.org/api/stats/">stats</a> 统计对象，方便后续二次处理，使用率极高。例如 <a target="_blank" rel="noopener" href="https://github1s.com/webpack-contrib/eslint-webpack-plugin">eslint-webpack-plugin</a> 就是通过这种方式输出 ESLint 检查出来的代码风格问题。</p>
<ul>
<li>使用 Hook Callback，这种方式可将错误信息传递到 Hook 下一个流程，由 Hook 触发者根据错误内容决定后续处理措施(中断、忽略、记录日志等)，如 <code>imagemin-webpack-plugin</code> 中：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">ImageminPlugin</span> &#123;</span><br><span class="line">  <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">onEmit</span> = <span class="keyword">async</span> (<span class="params">compilation, callback</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">          ...<span class="variable language_">this</span>.<span class="title function_">optimizeWebpackImages</span>(throttle, compilation),</span><br><span class="line">          ...<span class="variable language_">this</span>.<span class="title function_">optimizeExternalImages</span>(throttle),</span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">callback</span>();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="comment">// if at any point we hit a snag, pass the error on to webpack</span></span><br><span class="line">        <span class="title function_">callback</span>(err);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">emit</span>.<span class="title function_">tapAsync</span>(<span class="variable language_">this</span>.<span class="property">constructor</span>.<span class="property">name</span>, onEmit);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上例第 13 行，在 <code>catch</code> 块中通过 <code>callback</code> 函数传递错误信息。不过，并不是所有 Hook 都会传递 <code>callback</code> 函数，实际开发时建议参考相关用例。</p>
<ul>
<li>直接抛出异常，如：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PLUGIN_NAME</span> = <span class="string">&quot;FooPlugin&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FooPlugin</span> &#123;</span><br><span class="line">  <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123;</span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params">compilation</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Throw Error Directly&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">FooPlugin</span>;</span><br></pre></td></tr></table></figure>

<p>这种方式会导致 Webpack 进程奔溃，多用于插件遇到严重错误，不得不提前中断构建工作的场景。</p>
<p>总的来说，这些方式各自有适用场景：</p>
<ul>
<li>多数情况下使用 <code>compilation.errors/warnings</code>，柔和地抛出错误信息；</li>
<li>特殊场景，需要提前结束构建时，则直接抛出异常；</li>
<li>拿捏不准的时候，使用 <code>callback</code> 透传错误信息，交由上游调用者自行判断处理措施。</li>
</ul>
<h2 id="上报统计信息"><a href="#上报统计信息" class="headerlink" title="上报统计信息"></a>上报统计信息</h2><p>有时候需要在插件中执行一些特别耗时的操作，例如：抽取 CSS 代码（如 <a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/mini-css-extract-plugin">mini-css-extract-plugin</a>）、压缩图片（如 <a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin">image-minimizer-webpack-plugin</a>）、代码混淆（如 <a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/terser-webpack-plugin">terser-webpack-plugin</a>），这些操作会延长 Webpack 构建的整体耗时，更糟糕的是会阻塞构建主流程，最终用户会感觉到明显卡顿。</p>
<p>针对这种情况，可以在插件中上报一些统计信息，帮助用户理解插件的运行进度与性能情况，有两种上报方式：</p>
<ul>
<li>使用 <a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/progress-plugin">ProgressPlugin</a> 插件的 <code>reportProgress</code> 接口上报执行进度；</li>
<li>使用 <a target="_blank" rel="noopener" href="https://webpack.js.org/api/stats/">stats</a> 接口汇总插件运行的统计数据。</li>
</ul>
<blockquote>
<p>使用 <code>reportProgress</code> 接口</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/progress-plugin">ProgressPlugin</a> 是 Webpack 内置用于展示构建进度的插件，有两种用法：</p>
<ol>
<li>简化版，执行构建命令时带上 <code>--progress</code> 参数，如：</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack <span class="attr">--progress</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>也可以在 Webpack 配置文件中添加插件实例，如：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">ProgressPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ProgressPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">activeModules</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">entries</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">percentage, message, ...args</span>) &#123;</span><br><span class="line">        <span class="comment">// custom logic</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//...</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>开发插件时，可以使用 <code>ProgressPlugin</code> 插件的 <code>Reporter</code> 方法提交自定义插件的运行进度，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">ProgressPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PLUGIN_NAME</span> = <span class="string">&quot;BlockPlugin&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">wait</span> = (<span class="params">misec</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">r</span>) =&gt;</span> <span class="built_in">setTimeout</span>(r, misec));</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">noop</span> = (<span class="params"></span>) =&gt; (&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BlockPlugin</span> &#123;</span><br><span class="line">  <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123;</span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params">compilation</span>) =&gt;</span> &#123;</span><br><span class="line">      compilation.<span class="property">hooks</span>.<span class="property">processAssets</span>.<span class="title function_">tapAsync</span>(</span><br><span class="line">        <span class="variable constant_">PLUGIN_NAME</span>,</span><br><span class="line">        <span class="keyword">async</span> (assets, callback) =&gt; &#123;</span><br><span class="line">          <span class="keyword">const</span> reportProgress = <span class="title class_">ProgressPlugin</span>.<span class="title function_">getReporter</span>(compiler) || noop;</span><br><span class="line">          <span class="keyword">const</span> len = <span class="number">100</span>;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">wait</span>(<span class="number">50</span>);</span><br><span class="line">            <span class="title function_">reportProgress</span>(i / <span class="number">100</span>, <span class="string">`Our plugin is working <span class="subst">$&#123;i&#125;</span>%`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="title function_">reportProgress</span>(<span class="number">1</span>, <span class="string">&quot;Done work!&quot;</span>);</span><br><span class="line">          <span class="keyword">await</span> <span class="title function_">wait</span>(<span class="number">1000</span>);</span><br><span class="line">          <span class="title function_">callback</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">BlockPlugin</span>;</span><br></pre></td></tr></table></figure>

<p>示例中，最关键的代码在于第 12 行，即调用 <code>ProgressPlugin.getReporter</code> 方法获取 Reporter 函数，之后再用这个函数提交执行进度：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reportProgress = <span class="title class_">ProgressPlugin</span>.<span class="title function_">getReporter</span>(compiler) || noop;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：若最终用户没有使用 <code>ProgressPlugin</code> 插件，则这个函数会返回 Undefined，所以需要增加 <code>|| noop</code> 兜底。</p>
</blockquote>
<p><code>reportProgress</code> 接受如下参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">reportProgress</span>(percentage, ...args);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>percentage</code>：当前执行进度百分比，但这个参数实际并不生效， <code>ProgressPlugin</code> 底层会根据当前处于那个 Hook 计算一个固定的 Progress 百分比值，在自定义插件中无法改变，所以目前来看这个参数值随便填就好；</li>
<li><code>...args</code>：任意数量字符串参数，这些字符串会被拼接到 Progress 输出的信息。</li>
</ul>
<p>最终执行效果：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3416427756ea48048cddcaf9aa7cbcdc~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="3f291b39-e4cd-498c-b1e8-819d964982ab.gif"></p>
<blockquote>
<p>通过 <code>stats</code> 添加统计信息</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://webpack.js.org/api/stats/">stats</a> 是 Webpack 内置的数据统计机制，专门用于收集模块构建耗时、模块依赖关系、产物组成等过程信息，可以借此分析、优化应用构建性能。在开发插件时，可以借用 <code>stats</code> 机制，向用户输出插件各种维度的统计信息，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PLUGIN_NAME</span> = <span class="string">&quot;FooPlugin&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FooPlugin</span> &#123;</span><br><span class="line">  <span class="title function_">apply</span>(<span class="params">compiler</span>) &#123;</span><br><span class="line">    compiler.<span class="property">hooks</span>.<span class="property">compilation</span>.<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params">compilation</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> statsMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">      <span class="comment">// buildModule 钩子将在开始处理模块时触发</span></span><br><span class="line">      compilation.<span class="property">hooks</span>.<span class="property">buildModule</span>.<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params"><span class="variable language_">module</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> ident = <span class="variable language_">module</span>.<span class="title function_">identifier</span>();</span><br><span class="line">        <span class="keyword">const</span> startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="comment">// 模拟复杂耗时操作</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">const</span> endTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="comment">// 记录处理耗时</span></span><br><span class="line">        statsMap.<span class="title function_">set</span>(ident, endTime - startTime);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      compilation.<span class="property">hooks</span>.<span class="property">statsFactory</span>.<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params">factory</span>) =&gt;</span> &#123;</span><br><span class="line">        factory.<span class="property">hooks</span>.<span class="property">result</span></span><br><span class="line">          .<span class="title function_">for</span>(<span class="string">&quot;module&quot;</span>)</span><br><span class="line">          .<span class="title function_">tap</span>(<span class="variable constant_">PLUGIN_NAME</span>, <span class="function">(<span class="params"><span class="variable language_">module</span>, context</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; identifier &#125; = <span class="variable language_">module</span>;</span><br><span class="line">            <span class="keyword">const</span> duration = statsMap.<span class="title function_">get</span>(identifier);</span><br><span class="line">            <span class="comment">// 添加统计信息</span></span><br><span class="line">            <span class="variable language_">module</span>.<span class="property">fooDuration</span> = duration || <span class="number">0</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">FooPlugin</span>;</span><br></pre></td></tr></table></figure>

<p>再次执行 Webpack 构建命令，将产出如下 <code>stats</code> 统计信息：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;hash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0a17278b49620a86b126&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5.73.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">&quot;modules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;identifier&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/tecvan/studio/webpack-book-samples/target-sample/src/index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;fooDuration&quot;</span><span class="punctuation">:</span> <span class="number">124</span></span><br><span class="line">      <span class="comment">/*...*/</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;chunks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;entrypoints&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;namedChunkGroups&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>这种方式有许多优点：</p>
<ul>
<li>用户可以直接通过 <code>stats</code> 了解插件的运行情况，不需要重复学习其它方式；</li>
<li>支持按需执行，用户可通过 <a target="_blank" rel="noopener" href="https://webpack.js.org/configuration/stats/">stats</a> 配置项控制；</li>
<li>支持导出为 JSON 或其它文件格式，方便后续接入自动化分析流程。</li>
</ul>
<p>因此，若明确插件将执行非常重的计算任务，需要消耗比较长的构建时间时，可以通过这种方式上报关键性能数据，帮助用户做好性能分析。</p>
<h2 id="校验配置参数"><a href="#校验配置参数" class="headerlink" title="校验配置参数"></a>校验配置参数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; validate &#125; = <span class="built_in">require</span>(<span class="string">&quot;schema-utils&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> schema = &#123;</span><br><span class="line">  <span class="comment">/*...*/</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FooPlugin</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="title function_">validate</span>(schema, options);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="搭建自动测试环境"><a href="#搭建自动测试环境" class="headerlink" title="搭建自动测试环境"></a>搭建自动测试环境</h2><p>为 Webpack Loader 编写单元测试收益非常高，一方面对开发者来说，不用重复搭建测试环境、编写测试 demo；一方面对于最终用户来说，带有一定测试覆盖率的项目通常意味着更高、更稳定的质量。插件测试用例开发有两个关键技术点：</p>
<ol>
<li>如何搭建自动运行 Webpack，并能够读取构建结果的测试环境？</li>
<li>如何分析构建结果，确定插件逻辑符合预期？</li>
</ol>
<blockquote>
<p><strong>搭建测试环境</strong></p>
</blockquote>
<p>Webpack 虽然功能非常复杂，但本质上还是一个 Node 程序，所以可以使用一些 Node 测试工具搭建自动测试环境，例如 Jest、Karma 等。以 Jest 为例：</p>
<ol>
<li>安装依赖，考虑到用 ES6 编写测试用例，这里额外添加了 <a target="_blank" rel="noopener" href="https://jestjs.io/docs/getting-started#using-babel">babel-jest</a> 等包：</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="keyword">add</span> <span class="operator">-</span>D jest babel<span class="operator">-</span>jest <span class="variable">@babel</span><span class="operator">/</span>core <span class="variable">@babel</span><span class="operator">/</span>preset<span class="operator">-</span>env</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>添加 Babel 配置，如：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// babel.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [[<span class="string">&quot;@babel/preset-env&quot;</span>, &#123; <span class="attr">targets</span>: &#123; <span class="attr">node</span>: <span class="string">&quot;current&quot;</span> &#125; &#125;]],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>添加 Jest 配置文件，如：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jest.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">testEnvironment</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>到这里，基础环境设置完毕，可以开始编写测试用例了。首先需要在测试代码中运行 Webpack，方法很简单，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> webpack <span class="keyword">from</span> <span class="string">&quot;webpack&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">webpack</span>(config).<span class="title function_">run</span>();</span><br></pre></td></tr></table></figure>

<p>这部分逻辑比较通用，许多开源仓库都会将其提取为工具函数，类似于：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> webpack <span class="keyword">from</span> <span class="string">&quot;webpack&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; merge &#125; <span class="keyword">from</span> <span class="string">&quot;webpack-merge&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createFsFromVolume, <span class="title class_">Volume</span> &#125; <span class="keyword">from</span> <span class="string">&quot;memfs&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">runCompile</span>(<span class="params">options</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> opt = <span class="title function_">merge</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">      <span class="attr">devtool</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">// Mock 项目入口文件</span></span><br><span class="line">      <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./enter.js&quot;</span>),</span><br><span class="line">      <span class="attr">output</span>: &#123; <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;../dist&quot;</span>) &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    options</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> compiler = <span class="title function_">webpack</span>(opt);</span><br><span class="line">  <span class="comment">// 使用内存文件系统，节省磁盘 IO 开支</span></span><br><span class="line">  compiler.<span class="property">outputFileSystem</span> = <span class="title function_">createFsFromVolume</span>(<span class="keyword">new</span> <span class="title class_">Volume</span>());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    compiler.<span class="title function_">run</span>(<span class="function">(<span class="params">error, stats</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">reject</span>(error);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">resolve</span>(&#123; stats, compiler &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有了测试所需的基础环境，以及运行 Webpack 实例的能力之后，可以正式开始编写测试用例了。</p>
<blockquote>
<p><strong>编写测试用例</strong></p>
</blockquote>
<p>Webpack 插件测试的基本逻辑是：在测试框架中运行 Webpack，之后对比分析构建结果、状态等是否符合预期，对比的内容通常有：</p>
<ul>
<li>分析 <code>compilation.error/warn</code> 数组是否包含或不包含特定错误、异常信息，通常用于判断 Webpack 是否运行成功；</li>
<li>分析构建产物，判断是否符合预期，例如：<ul>
<li><code>image-minimizer-webpack-plugin</code> 单测中会 <a target="_blank" rel="noopener" href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin/blob/master/test/ImageminPlugin.test.js">判断</a> 最终产物图片有没有经过压缩；</li>
<li><code>copy-webpack-plugn</code> 单测中会 <a target="_blank" rel="noopener" href="https://github1s.com/webpack-contrib/copy-webpack-plugin/blob/HEAD/test/CopyPlugin.test.js">判断</a> 文件有没有被复制到产物文件；</li>
<li><code>mini-css-extract-plugin</code> 单测中会 <a target="_blank" rel="noopener" href="https://github1s.com/webpack-contrib/mini-css-extract-plugin/blob/HEAD/test/TestCases.test.js">判断</a> CSS 文件有没有被正确抽取出来。</li>
</ul>
</li>
</ul>
<p>沿着这个思路，构造一个简单的测试用例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&quot;path&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; promisify &#125; <span class="keyword">from</span> <span class="string">&quot;util&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; runCompile &#125; <span class="keyword">from</span> <span class="string">&quot;./helpers&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">FooPlugin</span> <span class="keyword">from</span> <span class="string">&quot;../src/FooPlugin&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;foo plugin&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&quot;should inject foo banner&quot;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      <span class="attr">stats</span>: &#123; compilation &#125;,</span><br><span class="line">      compiler,</span><br><span class="line">    &#125; = <span class="keyword">await</span> <span class="title function_">runCompile</span>(&#123;</span><br><span class="line">      <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">FooPlugin</span>()],</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> &#123; warnings, errors, assets &#125; = compilation;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断 warnings、errors 是否报出异常信息</span></span><br><span class="line">    <span class="title function_">expect</span>(warnings).<span class="title function_">toHaveLength</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="title function_">expect</span>(errors).<span class="title function_">toHaveLength</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">path</span>: outputPath &#125; = compilation.<span class="property">options</span>.<span class="property">output</span>;</span><br><span class="line">    <span class="comment">// 遍历 assets，判断经过插件处理后，产物内容是否符合预期</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">keys</span>(assets).<span class="title function_">map</span>(<span class="keyword">async</span> (name) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> pathToEmitted = path.<span class="title function_">join</span>(outputPath, name);</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">promisify</span>(compiler.<span class="property">outputFileSystem</span>.<span class="property">readFile</span>)(</span><br><span class="line">          pathToEmitted,</span><br><span class="line">          &#123; <span class="attr">encoding</span>: <span class="string">&quot;UTF-8&quot;</span> &#125;</span><br><span class="line">        );</span><br><span class="line">        <span class="title function_">expect</span>(result.<span class="title function_">startsWith</span>(<span class="string">&quot;// Inject By 范文杰&quot;</span>)).<span class="title function_">toBeTruthy</span>();</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>示例中，17、18 行通过 <code>errors/warnings</code> 判断运行过程是否出现异常；25 行读入产物文件，之后判断内容是否满足要求。</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>plugin高级</p><p><a href="http://example.com/2023/01/01/webpack/plugin/2.插件开发进阶/">http://example.com/2023/01/01/webpack/plugin/2.插件开发进阶/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>whitegl0ves</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-01-01</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-08-13</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" alt="支付宝"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/01/01/webpack/plugin/1.%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">plugin基础</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/11/01/ssr/react/next/1.%E6%90%AD%E5%BB%BAnextjs%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93%E9%A1%B9%E7%9B%AE/"><span class="level-item">next搭建ssr</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="data:image/jpeg;base64,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" alt="whitegl0ves"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">whitegl0ves</p><p class="is-size-6 is-block">notes</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">101</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">determined</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/README/"><span class="level-start"><span class="level-item">README</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/android/"><span class="level-start"><span class="level-item">android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/android/%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/engineering/"><span class="level-start"><span class="level-item">engineering</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/javascript/"><span class="level-start"><span class="level-item">javascript</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/javascript/%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">基础</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/project/"><span class="level-start"><span class="level-item">project</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/project/%E4%BE%9D%E8%B5%96%E6%B2%BB%E7%90%86/"><span class="level-start"><span class="level-item">依赖治理</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/react/"><span class="level-start"><span class="level-item">react</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/ssr/"><span class="level-start"><span class="level-item">ssr</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/ssr/react/"><span class="level-start"><span class="level-item">react</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/ssr/react/next/"><span class="level-start"><span class="level-item">next</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ssr/%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/stencil/"><span class="level-start"><span class="level-item">stencil</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/stencil/%E5%89%8D%E8%A8%80/"><span class="level-start"><span class="level-item">前言</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/stencil/%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/stencil/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"><span class="level-start"><span class="level-item">基础使用</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/vue/"><span class="level-start"><span class="level-item">vue</span></span><span class="level-end"><span class="level-item tag">28</span></span></a><ul><li><a class="level is-mobile" href="/categories/vue/compiler/"><span class="level-start"><span class="level-item">compiler</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/effect/"><span class="level-start"><span class="level-item">effect</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/others/"><span class="level-start"><span class="level-item">others</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/vue/others/%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6/"><span class="level-start"><span class="level-item">内置组件</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/others/%E7%89%B9%E6%AE%8A%E5%85%83%E7%B4%A0/"><span class="level-start"><span class="level-item">特殊元素</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/vue/reactive/"><span class="level-start"><span class="level-item">reactive</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/ref/"><span class="level-start"><span class="level-item">ref</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/render/"><span class="level-start"><span class="level-item">render</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/webpack/"><span class="level-start"><span class="level-item">webpack</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul><li><a class="level is-mobile" href="/categories/webpack/base/"><span class="level-start"><span class="level-item">base</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/webpack/loader/"><span class="level-start"><span class="level-item">loader</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/webpack/plugin/"><span class="level-start"><span class="level-item">plugin</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-11T15:35:18.114Z">2023-08-11</time></p><p class="title"><a href="/2023/08/11/js/%E5%9F%BA%E7%A1%80/%E5%BC%82%E6%AD%A5/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-08T16:36:42.000Z">2023-08-09</time></p><p class="title"><a href="/2023/08/09/stencil/%E5%89%8D%E8%A8%80/">写在前面</a></p><p class="categories"><a href="/categories/stencil/">stencil</a> / <a href="/categories/stencil/%E5%89%8D%E8%A8%80/">前言</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-07T12:33:48.537Z">2023-08-07</time></p><p class="title"><a href="/2023/08/07/stencil/%E5%AE%9E%E6%88%98/%E5%AE%9E%E6%88%98image%E7%BB%84%E4%BB%B6/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-07T12:30:58.207Z">2023-08-07</time></p><p class="title"><a href="/2023/08/07/stencil/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/2.%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-07T08:38:26.954Z">2023-08-07</time></p><p class="title"><a href="/2023/08/07/stencil/%E6%80%BB%E8%A7%88%E5%9B%BE/"> </a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">97</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="data:image/jpeg;base64,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" alt="whitegl0ves" height="28"></a><p class="is-size-7"><span>&copy; 2023 whitegl0ves</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2023 whitegl0ves notes</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="/"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>