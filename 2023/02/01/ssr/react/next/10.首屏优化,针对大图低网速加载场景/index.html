<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>AST - whitegl0ves</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="whitegl0ves"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="whitegl0ves"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content=""><meta property="og:type" content="blog"><meta property="og:title" content="AST"><meta property="og:url" content="http://example.com/2023/02/01/ssr/react/next/10.%E9%A6%96%E5%B1%8F%E4%BC%98%E5%8C%96,%E9%92%88%E5%AF%B9%E5%A4%A7%E5%9B%BE%E4%BD%8E%E7%BD%91%E9%80%9F%E5%8A%A0%E8%BD%BD%E5%9C%BA%E6%99%AF/"><meta property="og:site_name" content="whitegl0ves"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb1fe896c933460cb0adea773ee7ada4~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae8bee917ca64bcb83c0ab27eea918b0~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64d32ac5591e446d956ef50a6fc482d7~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d10bd1e4cdf4a6bab74b5a374d04144~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c792ed7ac4a1435b808af642de26e938~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb6b544f305e47f483a156846caa7bc9~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0818c423dff44f38a4d8679cf5ca7cad~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df5f4c5a4427450188c7366c83e54ed7~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><meta property="article:published_time" content="2023-02-01T10:23:11.000Z"><meta property="article:modified_time" content="2023-08-12T08:04:16.536Z"><meta property="article:author" content="whitegl0ves"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb1fe896c933460cb0adea773ee7ada4~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2023/02/01/ssr/react/next/10.%E9%A6%96%E5%B1%8F%E4%BC%98%E5%8C%96,%E9%92%88%E5%AF%B9%E5%A4%A7%E5%9B%BE%E4%BD%8E%E7%BD%91%E9%80%9F%E5%8A%A0%E8%BD%BD%E5%9C%BA%E6%99%AF/"},"headline":"AST","image":[],"datePublished":"2023-02-01T10:23:11.000Z","dateModified":"2023-08-12T08:04:16.536Z","author":{"@type":"Person","name":"whitegl0ves"},"publisher":{"@type":"Organization","name":"whitegl0ves","logo":{"@type":"ImageObject","url":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYWFRgVFhUZGRgaGhgYGhoaGBgaGhgYGBgaGhgYGBgcIS4lHB4rIRgYJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QGhISGjEhGCExMTE0MTQxNDExMTE0MTQxMTExMTQ0NDExNDExMTQ/ND80ND80PzQxPzExNDQ/MTQxMf/AABEIAOEA4QMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAADAQIEBQYABwj/xAA4EAACAQIFAgQEBQQCAQUAAAABAgADEQQSITFBBVEiYXGBE5GhsQYyQsHRFFJi8OHxchUjM4Ki/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAECAwQF/8QAIREBAQEBAAICAwEBAQAAAAAAAAERAgMhEjETQWEiUTL/2gAMAwEAAhEDEQA/AERgLwnxBYiRyeY5dp1MRUHE64vaDDRrNreAPe0d8MyMpvJlLFhFsVza6A8RddfGarnm9XIDnteJnuJNRqTnVcl+Rt7iBxWBZNdGT+4be/aTz5Oarrjrn7RwYjMe8Y2852sJozPzdzG1DfmB4vEjAyPYRWcWEDePbtGCLUvHZzeCuJ2Y3iCSW8428A2nM5WgEhlg3U940OfaOZ4EfqNzeOY3HrAs4jqYLEKBcnQCB4Nh0LWUC5lmlIILIMz8t29IbDYUItlOp3P7CEcqul/tObvvfX6b8859q6phzYk7/WDC/wDtsCfykEeQ2MJiUuCePT+ICjb4b+w+sXP/AKiu5/lGJnBo1m1iZxsZ1OSnZ507w950Ae9r7xQ4gsh1nKbRKPcm8VXgi9xcmLmtpAHic41B7eV4LN5w1Ggz3APudhM/L75aeK50n4R0tqu/mB9JPw7ZT4TdToVOukrsHTpobXLt57ewloljsuk4nZ0iY3pKOC1LRxqaZ5/8bykym9iNpo3Rwcyg6ed/lEeklTVlyv6fm9fOdHHmz1XP14vfpn/hEiwhKvS6irnI0mmwGFRAdBeWGQFbEaSr5p+mf46wAXSOQG23vNjT6PSGuW/rJq4ZLWyL8ofnn/B+N56EI3nAG+k3GLooQFyD5RlGii7Ivyh+f+D8X9Y/+lc6hT8jGLTbtN8u20Y1FTrlHyi/P/D/ABf1lundOL6nQae8n4nooI8O8tyANJHqVzxM75ut9LnijP1+mMtuZZYDA5AeXO5/tHYeckmpY66na/aHoWXYEn5/L+Yfk66OePmGphTEfC+f0lgita/i+ZEcU/3mCmfxlBlBINz27yqDj4d9sza+w4mnxaaWdcy9xuvylT1PAiyqDsDbknyl8T/SO7/lRE+K4MW14hSxIgmadTmGyjvOke86ATS/nGs0CAb7QiVN7iSZQykRrMO1486DS0Zp2hoIqgntJ9GuAAAt/M/sJAbQyTSa22tzI79qnpa4bfwotzubW+ZlglVRoBc+Q0HvI2GQkdh320hzUVfCo+mk476dnNOesx4+shu+usM7E6N9NIppgamRaYlB7m8mGuBpzK5aliYuFBZsxk6mxOZ2O20KgNtZ1NbmSvh6R/IYhrTLRvwiJORJ1RJUupqvWpx5ydRYbSvxKW1G419Y6nWIsfaMJeKwtxcbyGuEK6neWKVNd+PvDBRKwtUFbAkEEX13MLS02BP7y5xCX2F4FMFYE/6PKVINQGqMNk//AFaPWu9tVt/9gYLGhR4b/KQGOwyMR/kSbfXSVgq6pveR8bgQ4JF/bcHuBKnEYooL5QNRaxOnf3gU6+6kW1X6/Oacxj1Vfj8O6MQwv2PeQGImoHVqeIGRxkc7E2IJ9ZmsdSKOVIsfp7TeVlQdJ0ZmixhIPrOJMWo47RrW+m2sk3MfKKH4EjliNbRyEniAFAJMuOl4DTO35fv5SvwtEM2ugG5vxLhMagsBqBsOPWY+S+vTTmLALnFrWHY6bQnwgNpDTHF9CPTiTUNxOTp08kI7j3gnQ7R5JGkeZnqkCsv8SwwVPQQIpayfh04EWhLw1KSckSmIRjJ0I9RrQZN4uKg0Gk15TULGgg3gb2tHY/EgacxhuwBE0xIqvY38pIo1r/7xIwp/WSUFh7SolPWrGVapva+lth+54gVYARVN9jLgCWklidDrwL6+Xcxpw7Hsq9r6mSbnYD3tCLTA1OplFrOdcRUS9rn5zJPVJJM33V0LLYAXtpeYTG02VrNe/fj2tNufpl1faOTcyRiMUXADakC1zuRIdtYt5pGZMh7zoTP5zoBJy6j0g3tfa3vHofOBOpMz03OxtpHJUPIE7TaKo043jB7VDtt6Tv6kjQcwDtcw2GoM5yqtyeZNz9q52/S06bVLHLe80FCiQJX9L6OyG7A3+k0FrC1pw99S246udxDamd+0eFvrDMg32iDSZrgCDxAS0poAJBpKM0nqZNAqtFZoJWvFeSHHWCxK5VJHYxymDxVS6sPKbcVNZaiGqOzcKbD+ZpMNRsoNuJU4BALjz7S3qYjSw9/KXqcMyX+3tHih5xUYbi0IHHN5cI1KWkeqW0hEcbAxgNz3lxNOA7QZc9pMC2EiuveWhBrVBfvKXq+GBF9pf16d9RIlfD5ls0vmo6efYhLMQI0LLLq/TijEjYyqLTVImUToP4k6AT8o50g1VTyZwsBtG8DW0zAiJ5xWXtGMx2tfzvGjvrKPBT6azSdBTKuY/baZlWOYczZYC2QTn81zlr4p7T0xQ7xXxSgXJt6yO7oqlm0AlTWwr1tXYoh2RdCR/mw19hOF0jYz8SUUOUMzHsqk/W1oXBdVSptcHswIP1E81/ENIUqrhBawW3uTcj5Sow3Xq9IllqsBquXcEc6HiXOdK3HuFF9TJK1Z5b0D8Ws/hbwn6N/E1NHq9+ZNliplnpqDVirXmdTqOY6BiNdQORwBufaPw3UVdSUJuDZlIIIPYgycVi9bFWGpAlHieqlr5AP/ADa9vZRqfpIGMxuYkfpXQjue0ramK5J0G0uRNi6puy6msfYIB9QfvKvqPXkS7DEkHtkVx6HLYgTB/iHrL1WKKxCKbWB/MeSZVYpbAATX4oteo9O/GinRwp7Mpa3uG8S/aWLfjaghyVAy62zZTb5jcTxWjUKkEEi2s09NjisP8I//ACqCyAbPkGq+pXb0tzLR9vT6fWab6o4YHazH7S6wFYHxTzL8KUMhRXvYj5TW4HFu9VkKNTRVFjcHNf02P8x8+y6mNecUveR61e+wiYbDDeSxSm2MVc7ngGCepprpLM66SDjkGUyoVYfruLLMR5ylYSR1A+NvWRy81iTcsSPvFjArVTbbSd8XynNbaI4mQKr+UVmHF41tYqbgR6ay6Xh8zfl07zYYakABKPojIBsAZdviAouTpOLz9bXT4oDiSGqKnCjO3qfywjWvaVL49VqP/nlsbcBf5jjirj95yx0WYzP426a4f4lrrqD6d/b95gcThfFv4eJ7YM9RcoRXU/3aSqf8DqxJFPLfcBzl+RmvPWIvOvJ18AFjrea7pOLZ6YYghxob88A/abCj+F1o6jDK57lix+2krcX08oyEoUDM3HYA5be0OutVzMTMHg2RAzmwH1MHiDlb4qjXQP8A5Lff1H7mbHBYVXCu66W8KnjzPmYbGdNR0YFRqLSD151Qos9M1RqrM+vnfb7So6jXKow5sZsuk1BSFXD5CQtRiB2BA2+/vIXUOm0qrC4Km/btNZcTa8qbDOASRfn33j0ZXGvE9k6Z0LDIPEFYdzIXUfwbgKpuLIf8Gt9JXyiLHkLUQDvLf8PYd3dcn6CXvrwNBp52m0T8C4ZDq7ut9syj62vLVMJSopko0svpv6k8w+cEjOYSpXqEtkAzjxHVQljY5NdL2+s234exwCBHXxLpfy431MzXS0Ip5uCzkA9ixtJuDxRV+NY+ei69timMW+8lJjAZmazXGYGDw2NJNufvNpWVjVO4veMxFMMpB5kGhWNt5MFSXyivPPxB09qT33B2MqbzafiunmS441mIczaMqfOg/edKCTvOHpG54oYnzmSyluYucdvlGVDYCMD2hQuulOF8RPtLr4yuLE78THLV0Gukt8BisxCqJz+TjZrbjrDOsVCDlDE5QALgai/ccy76R0osAzE8aQVTo5bXYyXheqmjalVHOVKnDDgHsZxZjq3WiwtAINJJZ7C8g0sSDzFqYlANTpFaMS0qEym65RDvQW48LM7XvqAtrfWSqeLWxbgbecY+B+Ld30NiEAP5b8nvHB9ItXrqDRTa0Wj14WsbH3mK6hhq1CoVqrdDfI4204lP1TqNQZFoi7Me1zpsAJpzGvx5zW/xuQVkcMFzi2Y7DyPnpLVMOjgWsfPvMj0ToOIxGV8SxRANEXcnz3tL1KD4dsqnOnrYjuQT9j7R1jcWZwaA6qIUYentlEjrjUcWzWYcHQj2MCmK1t9ZKcGr4FDsLSg6ujU1OXVn8KebHb5b+0uanU0U5QczcKup+ewgadHO3xKgGbUKu4QHi/J84YLM9qqhhsqKn5soAueSBqZCxKZTmtzNHWoDiRsRhwRvNeYz660DDnMmkhuuVh9pc4fBhACDp5SH1HDW13HebRmsMHUzCWSyl6bLpZrzWfSi/EgIQkTD1ZvvxFSLIbTBOLXE05RQZ0dadLIUueIgJPM5HGtx840rvaZLMdvOOZrC8GEJjnTyMAcrAiWvQqiiotyNNh+8p0IhqFTI2a2x0k9TYrn7emZxaVuNoq4IIB73gMBWZ1HJtrJho6XJ9p5/UyuqVBw+emMqNccBwWC+QNwbTkqux8WQegb9zCslzYQiUdbDfnsJORfyqXhcONGbbgd/UdpPfEn/AKkVWVBqbmR6uKvxHhXq0HrdIVaZU77j1mf/AAx04h2dxqmi+V9z9JaYzFWFyZVYDqOV2v8AlP3lxU6uY2gxEFUxA5FxK1Mctrg394UYsci4jxAgrIDfQga2O49JIcU6guhAPYgGQ/iUyb2N4w01OqG0PiWn1aRXi3yt8xESuRvDUz+lj7nb/iRqtNlJ00/aOQr7ShiONxGqLyMB2/6kihL5Z1IReJAxTa24k2pUtIL6teaJEwSciW1M6SHhUkpBYzTlHRmMp5lImQ6p0Ug51FxyLzaOJExlC6HTSaSorz7+lf8At+k6XPwB5zpWkzV4rNpYRjnW37GceNZChEawiGqdhEy8Xi5Qu+/YfueIjIhJNgLmETKDY+I32GwPmefaD+IToBbyA/28nUqLILmwc/NAfIfqP0itOLTBY4qwDHX+wafPtL1cRm438/uZmsJhMvi1a/6m01/x5f20miTDMEzEeeXue7d5yeWTW/NHWoo/3f0/mPaqBop9TKl6hJuTBu5tMlxZNiFGl7xlXECUzmMaoRA0ishc6wTYEW0GsGMVaIeogQ09PSgynQybTrnmVg6sp3EVuor3EqVNaCnUUQ4qI2xAPaZV+o2sQeRC0MWLk3tY79g2qn2P3lE0vxCNTqIz+q0spB7A6g/4+RlVR6kdiNyRrww3HoYmIRVs4JyOSDb9DjcH7wC0FdW1Q2Ybo29+QD/NoWjiRbsb6jtKg4gMbFbOP1DXMO/+Wnzj6OO4ZVYbAg2YD3+0qJq0q1bxKYuRIi24b2Nr/eSKFUbS5UVb0LTkcEmRjWsI2hU1mkrOxZKIdaV1gKDSzpJcTWWIZ7/09e06Xn9JEgHizvaMUX1OkOtMnVQPvCJhjbxHngEydVgDKf0ajkjf5fxOo4csbAHTsNfaSQEG4Jt3OUX9B4vtDVMWUAW5X9VhcEk+V728yYqeHYfBMNR4QOTqFP3ZvoI966J4QAW5YnMb82UafM/OVlfFu+hY27X+pjMOlzJpxp+iMjuDlYt/cxvp5dh6TYsgye0z/wCG8CbXsR6ian4ek5fJfbfmMniUsx4HP+95GdSeP97S46rh7G52kTDpm4mVq0AUTA1KU0JwnlGN06HyDI4lbStrgnib09HW35b+sG3Qwf0gQ+Qef68x6JeavF/h8k+ERtDoLXsR6w+QZlEYm0uMNhfy3H5lKn14/aXlDpYRr5R6mTUwZZAVtcHsO8rnrQzxwrMuY7MAD5MvP2h8CL3pvoraNvYOPyv89D6zTVsECjAgX3+f/cTD4BQAxGp0tLibWV/pWByNoy6Ke+u1/tG1EzHXwv56BvXsZua3T1cDwgf8echYvooYba9+/rLxHyjIXIPYybhsSe8k4jp7r4WAI4/4MjGiAeR5HX6w+iuLBKhaWWEokyvwVO5Gs0GHp21jnVKw+lhzeWdIWEFSHMkrNeetZ2G3nR+WdL0seGms/wDcfrELn9TW9f4gFe2w/n5xjveCkijUAPhv3JO+mvtIpqEkkm+pj/iZR/5ae0C78xAVTeW3QcOXcZdbGRuj4Muw8NxPSuj9PWmtgoH8zLvrIvnnU3AULLqJLM5Y6clutpFXjsMH3kalhiOJcsl53wZOmg08NyYX4HMkfCMeEi0K9zGM0kYmnrpArTvDRhhe+gEkLRA3jaaWMLUF4QI9bKQbC5hsJRsgHzgiwUyQjWmkKpD0ht5REo20t6QRr66HtJeHe7GXzUUKrcDaPpoCId2gXSy3U6zaICxGFBFrXEpcV00Di4+00mGqXFjoY6rhVbyMKTK4fDhTpLei2kmf0S8gThghxpM8qvR1F4ZDGLh7QqJaXzU2HTo606VpY+fVeO09IEU7m8K1joBtNdIOomY3B9ofC0Mxy7+UNgcCHO80eD6eEN7zLvyY0551Yfh6jlAGg9JqKZlT0zCj80uEWc3XWtZMFQwoEGghAJCihYSMBnF5IPvFvB3jQ0Ac6wKi0PeAfePBodQeIR7jScVuYQrFCVmITmOrnT2kvEJofSC+HeWEPAPdjeW1I6+spQhR5PVySLSpU1OS5LeRkhFkDC1bZgeZLV7C81nSLBMghEa0jh7jSNV7G0vU2J5aJlkcvHK5gB7RpMYXMGzR4Q2adAZ50fxJ4amEcjwj1kzB9LYnxAiX2Aw4yiWtNByJl15b+m05iqw+BCybh6JvYSzpYVTxJuGwwBvMb1auTC4OllUSUsIi6R+WKmakLGAQgkmY7SJVr2MlOl4I4QbmIFoPcRSZwS20RjAB5yBOpVA3rErbGAoi2plpTKbSSBKtWk6i/h84p9gtUaGMpCOd4qCMIGNpa3i4Je8PXWFoU7AGGhwpa+0cy6QiwVUm805qKIido2uOY5Kmmsaz3miCo8KGkZRaERpfMKpGaBdo8NeDdNZpIztNvEi5IseDWGwe0nrOnTgrqiwwu0mU506JSWm0cYs6AMhROnSTKsR506IGNtAtOnQAdf8AKYNdhOnTRIYkqlFnSYCtDU9hOnRlQa28kUPyidOiMsY0SdLiKa+0HS3izptECxViTpfJU+PfedOmsZ02dOnRk//Z"}},"description":""}</script><link rel="canonical" href="http://example.com/2023/02/01/ssr/react/next/10.%E9%A6%96%E5%B1%8F%E4%BC%98%E5%8C%96,%E9%92%88%E5%AF%B9%E5%A4%A7%E5%9B%BE%E4%BD%8E%E7%BD%91%E9%80%9F%E5%8A%A0%E8%BD%BD%E5%9C%BA%E6%99%AF/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="data:image/jpeg;base64,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" alt="whitegl0ves" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="/"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-02-01T10:23:11.000Z" title="2023/2/1 18:23:11">2023-02-01</time>发表</span><span class="level-item"><time dateTime="2023-08-12T08:04:16.536Z" title="2023/8/12 16:04:16">2023-08-12</time>更新</span><span class="level-item">25 分钟读完 (大约3687个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">AST</h1><div class="content"><blockquote>
</blockquote>
<span id="more"></span>

<p>前几节课我们针对官网的常见需求进行了学习，包括主题化、多媒体适配、动画、分页、组件实现等，相信大家后面面对官网的常见需求，都会有自己的思路，同时我们的官网现在也已经实现了大部分功能，麻雀虽小五脏俱全。从这节课开始，我们将开始学习性能优化篇，针对一些常见性能优化问题展开学习。</p>
<p>官网需求的交互中，通常会有一些高分辨率图片用于展示，这些图片通常体积大、加载时间长，且占页面区域较大，如果在网速较快的情况下可能尚可，但是在低网速，类似<br>fast 3G， slow 3G 的场景下，几百 kb，甚至几 mb<br>的图片资源加载是难以忍受的，加上区域大，很可能会出现页面内容已经加载完成，但是图片区域长时间留白的问题。这节课我们将一起讨论下，高分辨率图在低网速下加载时，应该如何减少加载时间，达到首屏优化的目的。</p>
<h2 id="静态样式"><a href="#静态样式" class="headerlink" title="静态样式"></a>静态样式</h2><p>首先我们先切两个大图，加在首页的位置，大小控制在 500kb 上下的清晰度（500px * 500px 2x) 即可，这种在快速 3g 的网速下，通常需要请求几十秒左右可以完全加载，可以用来说明我们这个场景。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// ./pages/global<span class="selector-class">.scss</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attr">--home-background-icon</span>: <span class="built_in">url</span>(<span class="string">&quot;../public/home_bg_dark.png&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attr">--home-background-icon</span>: <span class="built_in">url</span>(<span class="string">&quot;../public/home_bg_light.png&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./pages/index.tsx</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&lt;<span class="selector-tag">div</span> <span class="selector-tag">className</span>=&#123;<span class="selector-tag">styles</span><span class="selector-class">.header</span>&#125;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// ./pages/index<span class="selector-class">.module</span><span class="selector-class">.scss</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">var</span>(--home-background-icon);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">18.75rem</span> <span class="number">18.75rem</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18.75rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">18.75rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>样式最后是这样的，图片的大小大致在 700kb， 正常 4g 网络下的加载时长为 7ms 左右。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb1fe896c933460cb0adea773ee7ada4~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<p>我们把网速切换至 fast 3g，看看这个图片的加载时长需要多久。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae8bee917ca64bcb83c0ab27eea918b0~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<p>可以看到需要 4s，远远超过其他的静态资源，这意味着我们页面元素加载出来后，用户需要再等好几秒图片才能缓缓加载出来，虽然现在低网速用户群体不多，但我们还是要考虑一下怎么做。针对这个问题，我在实际业务开发中有尝试过几个方案，在这里和大家分享讨论一下。</p>
<h2 id="navigator-connection-effectiveType"><a href="#navigator-connection-effectiveType" class="headerlink" title="navigator.connection.effectiveType"></a>navigator.connection.effectiveType</h2><blockquote>
<p>The <code>effectiveType</code> read-only property of the <code>NetworkInformation</code><br>interface returns the effective type of the connection meaning one of<br>‘slow-2g’, ‘2g’, ‘3g’, or ‘4g’. This value is determined using a<br>combination of recently observed, round-trip time and downlink values.</p>
</blockquote>
<p>这是 <a href="https://link.juejin.cn/?target=https://wicg.github.io/netinfo/" title="https://wicg.github.io/netinfo/">MDN 2020 年 网络信息接口提案</a>中提出的最新<br>BOM 属性，我们可以通过这个 BOM 来获取当前的流量状态，根据不同的流量状态进行图片清晰度的选择，在较低网速下的场景，我们可以选择优先加载<br>0.5x 或是 1x 的图片，同时我们也加载 2x 的大图，通过隐藏 DOM 的方式隐性加载，然后监听 2x 资源的 onload<br>事件，在资源加载完成时，进行类的切换即可。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64d32ac5591e446d956ef50a6fc482d7~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<p><strong>这种方案在低网速下的效果是所有方案中最好的</strong> ，用户的感知视角是，他只需要等待 0.5x 到 1x 的模糊图加载时长，不会有区域的大面积留白，同时最后也可以体验到高清图的交互。</p>
<p>不过这种方案毕竟还是一个实验性属性，兼容性各方面并不是很好，只有较少的浏览器支持这个属性，大家可以看下面 MDN 中显示已支持的浏览器类型。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d10bd1e4cdf4a6bab74b5a374d04144~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<p>可以看到在 IOS 上这个属性都还不支持，所以我们不采用这个方案，等过段时间如果成为了正式属性，我是更推荐大家用这种方式根据实际场景进行优化的。感兴趣的同学可以下来自己尝试一下，还是挺有意思的，思路参照上面的就可。需要注意的有两点：</p>
<ul>
<li>考虑到兼容性问题，navigator.connection.effectiveType 的使用需要进行判空处理，避免因为 <code>navigator.connection is not defined </code>的报错阻塞页面渲染，可以写成<code>navigator?.connection?.effectiveType</code>来进行调用。</li>
<li>因为是 BOM，在前面的实现篇、需求进阶篇等课程中，我们多次提到因为同构的原理，我们的模板页面会同时执行在服务器端和客户端，在服务器端是没有 BOM 等属性的注入的，如果是在 hook 以外的地方调用，我们需要对第一个元素进行判空，采用<code>typeof navigator !== &quot;undefined&quot; &amp;&amp; navigator?.connection?.effectiveType</code>的方式调用。</li>
</ul>
<h2 id="responsive-images-picture"><a href="#responsive-images-picture" class="headerlink" title="responsive images &#x2F; picture"></a>responsive images &#x2F; picture</h2><p>浏览器有提供响应式图片的能力，分别是 img srcset 和 picture，它们都支持根据不同的像素场景自动选取不同的元素来进行适配，下面是两个 MDN 的使用例子。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// img srcset</span><br><span class="line">&lt;img <span class="attr">srcset</span>=<span class="string">&quot;elva-fairy-480w.jpg 480w,</span></span><br><span class="line"><span class="string">             elva-fairy-800w.jpg 800w&quot;</span>sizes=<span class="string">&quot;(max-width: 600px) 480px,</span></span><br><span class="line"><span class="string">            800px&quot;</span>src=<span class="string">&quot;elva-fairy-800w.jpg&quot;</span>alt=<span class="string">&quot;Elva dressed as a fairy&quot;</span>&gt;</span><br><span class="line">// picture</span><br><span class="line">&lt;picture&gt;</span><br><span class="line">    &lt;source <span class="attr">srcset</span>=<span class="string">&quot;/media/cc0-images/surfer-240-200.jpg&quot;</span></span><br><span class="line">            <span class="attr">media</span>=<span class="string">&quot;(min-width: 800px)&quot;</span>&gt;</span><br><span class="line">    &lt;img <span class="attr">src</span>=<span class="string">&quot;/media/cc0-images/painted-hand-298-332.jpg&quot;</span> alt=<span class="string">&quot;&quot;</span> /&gt;</span><br><span class="line">&lt;/picture&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>img srcset 直接根据像素比来选取适合的静态资源加载，而对于 picture, <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Glossary/User_agent" title="https://developer.mozilla.org/zh-CN/docs/Glossary/User_agent">user agent</a> 会检查每个 <code>&lt;source&gt;</code> 的 <code>srcset</code>、<code>media</code> 和 <code>type</code> 属性，来选择最匹配页面当前布局、显示设备特征等的兼容图像。</p>
</blockquote>
<p>这种方案兼容性很强，不过缺陷也很明显，针对 PC<br>端的确是需要高清图且低网速的场景，它没办法做任何处理。且如果在低像素场景下，低分辨率的图也没办法满足需求时，这个方案也是束手无策的，它的本质还是根据不同页宽来调整资源的分辨率，没办法改变高分辨率资源加载时间长的现状。</p>
<p>不过这两种方案在 C 端中也有广泛的应用，对于多媒体设备，可以针对不同页宽设备选取不同分辨率的资源，对性能也是有很大提高的，同学们感兴趣可以下来尝试一下。</p>
<h2 id="webp"><a href="#webp" class="headerlink" title="webp"></a>webp</h2><blockquote>
<p>WebP is a modern <strong>image format</strong> that provides superior <strong>lossless and lossy</strong><br>compression for images on the web. Using WebP, webmasters and web<br>developers can create smaller, richer images that make the web faster.</p>
</blockquote>
<p>Webp 是谷歌推出的一种新的格式，简单来说，它可以通过 jpg、 png<br>等主流资源格式转换，达到无损画质的效果，并且相比正常的图片资源，压缩体积会减少到 40% 以上，大量主流浏览器已经支持了 webp，并且最近<br>IOS14 及以上设备的 safari 浏览器也已经新增对 webp 的支持，只有少部分 IOS 低版本还不兼容。 <strong>这是我比较推荐大家使用的方案</strong> ，我们以我们的 demo 官网项目为例试验一下。</p>
<p>首先，我们针对静态样式部分的资源进行 webp 相关的转换，转换的方式很简单，大家可以在 google 上搜索 png to webp，有很多开源免费的转换器可以帮助我们进行资源的转换。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c792ed7ac4a1435b808af642de26e938~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<p>资源压缩后，我们可以看到 webp 对应的大小为 456kb，相比当初的 700kb 减少了近 40%，接下来我们把它加到代码中，试验一下 3g 场景下实际加载的时间可以优化多少。</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb6b544f305e47f483a156846caa7bc9~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// ./pages/global<span class="selector-class">.scss</span></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> &#123;</span><br><span class="line">  // ...</span><br><span class="line">  <span class="attr">--home-background-icon-webp</span>: <span class="built_in">url</span>(<span class="string">&quot;../public/home_bg_dark.webp&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> &#123;</span><br><span class="line">  // ...</span><br><span class="line">  <span class="attr">--home-background-icon-webp</span>: <span class="built_in">url</span>(<span class="string">&quot;../public/home_bg_light.webp&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为一些浏览器还不支持 webp， 所以我们需要对它的兼容性进行判断，在资源请求的请求头 accept 字段中，包含了当前浏览器所支持的静态资源类型，我们可以通过这个字段来进行判断。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0818c423dff44f38a4d8679cf5ca7cad~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ./utils/index.ts</span><br><span class="line">export const <span class="attr">getIsSupportWebp</span> = (context: AppContext) =&gt; &#123;</span><br><span class="line">  const &#123; <span class="attr">headers</span> = &#123;&#125; &#125; = context.ctx.req || &#123;&#125;<span class="comment">;</span></span><br><span class="line">  return headers.accept?.includes(&quot;image/webp&quot;)<span class="comment">;</span></span><br><span class="line">&#125;<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>我们可以在 _app.tsx 中对所有的组件进行 isSupportWebp 的注入，这样我们每个页面模板都可以拿到这个字段。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./pages/_app.tsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">AppProps</span>, <span class="title class_">AppContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next/app&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;next/app&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span>, <span class="title class_">ILayoutProps</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/components/layout&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Head</span> <span class="keyword">from</span> <span class="string">&quot;next/head&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getIsMobile, getIsSupportWebp, <span class="variable constant_">LOCALDOMAIN</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ThemeContextProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/stores/theme&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserAgentProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/stores/userAgent&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">LanguageContextProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/stores/language&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./global.scss&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">IComponentProps</span> &#123;</span><br><span class="line">  isMobile?: <span class="built_in">boolean</span>;</span><br><span class="line">  isSupportWebp?: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">MyApp</span> = (<span class="params"></span></span><br><span class="line"><span class="params">  data: AppProps &amp; ILayoutProps &amp; &#123; isMobile: <span class="built_in">boolean</span>; isSupportWebp: <span class="built_in">boolean</span> &#125;</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    <span class="title class_">Component</span>,</span><br><span class="line">    pageProps,</span><br><span class="line">    navbarData,</span><br><span class="line">    footerData,</span><br><span class="line">    isMobile,</span><br><span class="line">    isSupportWebp,</span><br><span class="line">  &#125; = data;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>&#123;`A Demo for 《SSR 实战：官网开发指南》($&#123;</span></span><br><span class="line"><span class="language-xml">          isMobile ? &quot;移动端&quot; : &quot;pc端&quot;</span></span><br><span class="line"><span class="language-xml">        &#125;)`&#125;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">meta</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;description&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">content</span>=<span class="string">&#123;</span>`<span class="attr">A</span> <span class="attr">Demo</span> <span class="attr">for</span> 《<span class="attr">SSR</span> <span class="attr">实战</span>：<span class="attr">官网开发指南</span>》($&#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">isMobile</span> ? &quot;<span class="attr">移动端</span>&quot; <span class="attr">:</span> &quot;<span class="attr">pc端</span>&quot;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#125;)`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/favicon.ico&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">LanguageContextProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ThemeContextProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">UserAgentProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Layout</span> <span class="attr">navbarData</span>=<span class="string">&#123;navbarData&#125;</span> <span class="attr">footerData</span>=<span class="string">&#123;footerData&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Component</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &#123;<span class="attr">...pageProps</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">isMobile</span>=<span class="string">&#123;isMobile&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">isSupportWebp</span>=<span class="string">&#123;isSupportWebp&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">UserAgentProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContextProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">LanguageContextProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyApp</span>.<span class="property">getInitialProps</span> = <span class="keyword">async</span> (<span class="attr">context</span>: <span class="title class_">AppContext</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> pageProps = <span class="keyword">await</span> <span class="title class_">App</span>.<span class="title function_">getInitialProps</span>(context);</span><br><span class="line">  <span class="keyword">const</span> &#123; data = &#123;&#125; &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`<span class="subst">$&#123;LOCALDOMAIN&#125;</span>/api/layout`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...pageProps,</span><br><span class="line">    ...data,</span><br><span class="line">    <span class="attr">isMobile</span>: <span class="title function_">getIsMobile</span>(context),</span><br><span class="line">    <span class="attr">isSupportWebp</span>: <span class="title function_">getIsSupportWebp</span>(context),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MyApp</span>;</span><br></pre></td></tr></table></figure>

<p>接下来我们只需要在 index.tsx 中引入对应的 webp 资源就可以了。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">NextPage</span> &#125; <span class="keyword">from</span> <span class="string">&quot;next&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&quot;./index.module.scss&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> cName <span class="keyword">from</span> <span class="string">&quot;classnames&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useContext, useEffect, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ThemeContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/stores/theme&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Pagination</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@douyinfe/semi-ui&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">LOCALDOMAIN</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/utils&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">IArticleIntro</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./api/articleIntro&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;next/app&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">IComponentProps</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./_app&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IProps</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">articles</span>: &#123;</span><br><span class="line">    <span class="attr">list</span>: &#123;</span><br><span class="line">      <span class="attr">label</span>: <span class="built_in">string</span>;</span><br><span class="line">      <span class="attr">info</span>: <span class="built_in">string</span>;</span><br><span class="line">      <span class="attr">link</span>: <span class="built_in">string</span>;</span><br><span class="line">    &#125;[];</span><br><span class="line">    <span class="attr">total</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Home</span>: <span class="title class_">NextPage</span>&lt;<span class="title class_">IProps</span> &amp; <span class="title class_">IComponentProps</span>&gt; = <span class="function">(<span class="params">&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">  title,</span></span></span><br><span class="line"><span class="params"><span class="function">  description,</span></span></span><br><span class="line"><span class="params"><span class="function">  articles,</span></span></span><br><span class="line"><span class="params"><span class="function">  isSupportWebp,</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [content, setContent] = <span class="title function_">useState</span>(articles);</span><br><span class="line">  <span class="keyword">const</span> mainRef = useRef&lt;<span class="title class_">HTMLDivElement</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; theme &#125; = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    mainRef.<span class="property">current</span>?.<span class="property">classList</span>.<span class="title function_">remove</span>(styles.<span class="property">withAnimation</span>);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      mainRef.<span class="property">current</span>?.<span class="property">classList</span>.<span class="title function_">add</span>(styles.<span class="property">withAnimation</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [theme]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">main</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;cName([styles.main,</span> <span class="attr">styles.withAnimation</span>])&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;mainRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&#123;cName(&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            [<span class="attr">styles.header</span>]<span class="attr">:</span> <span class="attr">true</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            [<span class="attr">styles.headerWebp</span>]<span class="attr">:</span> <span class="attr">isSupportWebp</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#123;styles.title&#125;</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&#123;styles.description&#125;</span>&gt;</span>&#123;description&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.grid&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;content?.list?.map((item, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">            return (</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">key</span>=<span class="string">&#123;index&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">className</span>=<span class="string">&#123;styles.card&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onClick</span>=<span class="string">&#123;():</span> <span class="attr">void</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                  window.open(</span></span><br><span class="line"><span class="language-xml">                    item.link,</span></span><br><span class="line"><span class="language-xml">                    &quot;blank&quot;,</span></span><br><span class="line"><span class="language-xml">                    &quot;noopener=yes,noreferrer=yes&quot;</span></span><br><span class="line"><span class="language-xml">                  );</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;</span></span><br><span class="line"><span class="language-xml">              &gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;item.label&#125; <span class="symbol">&amp;rarr;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;item.info&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            );</span></span><br><span class="line"><span class="language-xml">          &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.paginationArea&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Pagination</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">total</span>=<span class="string">&#123;content?.total&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">pageSize</span>=<span class="string">&#123;6&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onPageChange</span>=<span class="string">&#123;(pageNo)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                axios</span></span><br><span class="line"><span class="language-xml">                  .post(`$&#123;LOCALDOMAIN&#125;/api/articleIntro`, &#123;</span></span><br><span class="line"><span class="language-xml">                    pageNo,</span></span><br><span class="line"><span class="language-xml">                    pageSize: 6,</span></span><br><span class="line"><span class="language-xml">                  &#125;)</span></span><br><span class="line"><span class="language-xml">                  .then((&#123; data &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                    setContent(&#123;</span></span><br><span class="line"><span class="language-xml">                      list: data.list.map((item: IArticleIntro) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                        return &#123;</span></span><br><span class="line"><span class="language-xml">                          label: item.label,</span></span><br><span class="line"><span class="language-xml">                          info: item.info,</span></span><br><span class="line"><span class="language-xml">                          link: `$&#123;LOCALDOMAIN&#125;/article/$&#123;item.articleId&#125;`,</span></span><br><span class="line"><span class="language-xml">                        &#125;;</span></span><br><span class="line"><span class="language-xml">                      &#125;),</span></span><br><span class="line"><span class="language-xml">                      total: data.total,</span></span><br><span class="line"><span class="language-xml">                    &#125;);</span></span><br><span class="line"><span class="language-xml">                  &#125;);</span></span><br><span class="line"><span class="language-xml">              &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Home</span>.<span class="property">getInitialProps</span> = <span class="keyword">async</span> (context) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: homeData &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">`<span class="subst">$&#123;LOCALDOMAIN&#125;</span>/api/home`</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: articleData &#125; = <span class="keyword">await</span> axios.<span class="title function_">post</span>(</span><br><span class="line">    <span class="string">`<span class="subst">$&#123;LOCALDOMAIN&#125;</span>/api/articleIntro`</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">pageNo</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: <span class="number">6</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: homeData.<span class="property">title</span>,</span><br><span class="line">    <span class="attr">description</span>: homeData.<span class="property">description</span>,</span><br><span class="line">    <span class="attr">articles</span>: &#123;</span><br><span class="line">      <span class="attr">list</span>: articleData.<span class="property">list</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item: IArticleIntro</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">label</span>: item.<span class="property">label</span>,</span><br><span class="line">          <span class="attr">info</span>: item.<span class="property">info</span>,</span><br><span class="line">          <span class="attr">link</span>: <span class="string">`<span class="subst">$&#123;LOCALDOMAIN&#125;</span>/article/<span class="subst">$&#123;item.articleId&#125;</span>`</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="attr">total</span>: articleData.<span class="property">total</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./pages/index.module.scss</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">.headerWebp &#123;</span><br><span class="line">  background-image: <span class="built_in">var</span>(--home-background-icon-webp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们来看看效果，fast 3g 下对应资源的加载时间 从 4s 减少到了 3s，优化了近 25%！</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df5f4c5a4427450188c7366c83e54ed7~tplv-k3u1fbpfcp-jj-mark:1890:0:0:0:q75.avis" alt="image.png"></p>
<h2 id="webp-的小彩蛋"><a href="#webp-的小彩蛋" class="headerlink" title="webp 的小彩蛋"></a>webp 的小彩蛋</h2><p>同学们可能对 webp 的原理并不清楚，这里值得一提的是，为什么 webp 可以在保证无损画质的前提下，缩小这么多体积呢？很有意思的一件事是，当处于极快网速的情况下， <strong>webp 相比同画质的 png 的加载时间反而会更长</strong> ，即使它相比其他类型的资源，体积上缩小了整整 40% 以上。为什么会有这样的现象呢？</p>
<p>webp 的低体积并不是毫无代价的，webp 在压缩过程中进行了分块、帧内预测、量化等操作，这些操作是减少 webp<br>体积的核心原因，不过作为交换的是，相比 jpg、 png 等资源，它具备更长的解析时长，不过这个是不受网速等影响的，因为是浏览器内置的能力。</p>
<p>所以这也是为什么在极快网速的情况下，webp 的加载时间有时会呈现为负优化的原因，因为减少的资源请求时间不足够抵消掉额外的解析时间，不过这个时间差值并不长，几毫秒在用户体验的过程中是无伤大雅的。</p>
<p>但是在低网速的场景下，这个优化比例是极高的，因为 40%<br>的体积大小，对于低网速场景下，请求时间将会是质的提高，相比之下，几毫秒的解析时长就无关紧要了。上面我们测试的是 fast<br>3g，同学们可以下来试试 slow 3g 的效果，随着网络质量的变差，这个优化会更加显著！</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>这一节课我们学习了怎么针对低网速场景对高分辨率图片进行首屏优化，我们分别对比了 navigator.connection.effectiveType、 responsive images &#x2F; picture 和 webp 三种方案。</p>
<p>其中 navigator.connection.effectiveType 仍然处于 MDN 提案试验属性的阶段，兼容性不高，虽然效果很理想，但是并不建议大家使用。</p>
<p>responsive images &#x2F; picture 可以针对不同页宽的图片选取不同的资源，在 C 端优化中有广泛的使用，但是并不能解决我们低网速高分辨率加载时间长的痛点。</p>
<p>最推荐大家使用的是 google 推出的一个新的格式 webp，虽然仍然未适配所有的浏览器，但是主流的浏览器和 IOS<br>高版本浏览器都已经支持了这个方案，它通过更细致的解析，可以大幅度减少同画质资源的体积，虽然会有相对更多一些的解析时长，但是在低网速场景，优化的体积可以大幅度地减少加载时间，从而优化首屏，随着网络质量的变差，这个优化会更加显著。</p>
<p>IOS 是我们站点一种常用的设备类型，相比安卓和 PC 等浏览器，它具备更多自己的特性，我们实际开发中往往需要兼容这些场景。下一节课我们将来探讨，针对 IOS 常见的橡皮筋和 300ms delay 问题，我们可以怎么去优化解决。</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>AST</p><p><a href="http://example.com/2023/02/01/ssr/react/next/10.首屏优化,针对大图低网速加载场景/">http://example.com/2023/02/01/ssr/react/next/10.首屏优化,针对大图低网速加载场景/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>whitegl0ves</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-02-01</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-08-12</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" href="/" target="_blank" rel="noopener" data-type="afdian"><span class="icon is-small"><i class="fas fa-charging-station"></i></span><span>爱发电</span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" alt="支付宝"></span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" href="/" target="_blank" rel="noopener" data-type="patreon"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/02/01/webpack/plugin/3.hook/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">hook</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/02/01/ssr/react/next/11.%E8%AE%BE%E5%A4%87%E5%85%BC%E5%AE%B9/"><span class="level-item">AST</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="data:image/jpeg;base64,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" alt="whitegl0ves"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">whitegl0ves</p><p class="is-size-6 is-block">notes</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">99</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">determined</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/README/"><span class="level-start"><span class="level-item">README</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/android/"><span class="level-start"><span class="level-item">android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/android/%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/engineering/"><span class="level-start"><span class="level-item">engineering</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/javascript/"><span class="level-start"><span class="level-item">javascript</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/javascript/%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">基础</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/project/"><span class="level-start"><span class="level-item">project</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/project/%E4%BE%9D%E8%B5%96%E6%B2%BB%E7%90%86/"><span class="level-start"><span class="level-item">依赖治理</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/react/"><span class="level-start"><span class="level-item">react</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/categories/ssr/"><span class="level-start"><span class="level-item">ssr</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/ssr/react/"><span class="level-start"><span class="level-item">react</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/ssr/react/next/"><span class="level-start"><span class="level-item">next</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ssr/%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/stencil/"><span class="level-start"><span class="level-item">stencil</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/stencil/%E5%89%8D%E8%A8%80/"><span class="level-start"><span class="level-item">前言</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/stencil/%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/stencil/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"><span class="level-start"><span class="level-item">基础使用</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/vue/"><span class="level-start"><span class="level-item">vue</span></span><span class="level-end"><span class="level-item tag">28</span></span></a><ul><li><a class="level is-mobile" href="/categories/vue/compiler/"><span class="level-start"><span class="level-item">compiler</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/effect/"><span class="level-start"><span class="level-item">effect</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/others/"><span class="level-start"><span class="level-item">others</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/vue/others/%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6/"><span class="level-start"><span class="level-item">内置组件</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/others/%E7%89%B9%E6%AE%8A%E5%85%83%E7%B4%A0/"><span class="level-start"><span class="level-item">特殊元素</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/vue/reactive/"><span class="level-start"><span class="level-item">reactive</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/ref/"><span class="level-start"><span class="level-item">ref</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/vue/render/"><span class="level-start"><span class="level-item">render</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/webpack/"><span class="level-start"><span class="level-item">webpack</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul><li><a class="level is-mobile" href="/categories/webpack/base/"><span class="level-start"><span class="level-item">base</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/webpack/loader/"><span class="level-start"><span class="level-item">loader</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/webpack/plugin/"><span class="level-start"><span class="level-item">plugin</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-11T15:35:18.114Z">2023-08-11</time></p><p class="title"><a href="/2023/08/11/js/%E5%9F%BA%E7%A1%80/%E5%BC%82%E6%AD%A5/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-08T16:36:42.000Z">2023-08-09</time></p><p class="title"><a href="/2023/08/09/stencil/%E5%89%8D%E8%A8%80/">写在前面</a></p><p class="categories"><a href="/categories/stencil/">stencil</a> / <a href="/categories/stencil/%E5%89%8D%E8%A8%80/">前言</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-07T12:33:48.537Z">2023-08-07</time></p><p class="title"><a href="/2023/08/07/stencil/%E5%AE%9E%E6%88%98/%E5%AE%9E%E6%88%98image%E7%BB%84%E4%BB%B6/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-07T12:30:58.207Z">2023-08-07</time></p><p class="title"><a href="/2023/08/07/stencil/%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/2.%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-07T08:38:26.954Z">2023-08-07</time></p><p class="title"><a href="/2023/08/07/stencil/%E6%80%BB%E8%A7%88%E5%9B%BE/"> </a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">95</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="data:image/jpeg;base64,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" alt="whitegl0ves" height="28"></a><p class="is-size-7"><span>&copy; 2023 whitegl0ves</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2023 whitegl0ves notes</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="/"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>